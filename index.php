
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	</head>
  <body>
	<script>
		function geo(){
			var options = {
				enableHighAccuracy: true,
				timeout: 5000,
				maximumAge: 0
			};
			function success(pos) {
				var crd = pos.coords;
				console.log('Current Device Position');
				console.log('Latitude : ' + crd.latitude);
				console.log('Longitude: ' + crd.longitude);
				console.log('Accuracy : ' + crd.accuracy + 'meters.');
			};
			function error(err){
				console.warn('ERROR(' + err.code + '): ' + err.message);
			};
			navigator.geolocation.getCurrentPosition(success, error, options);
		}
	</script>


	<?php
		echo '<script type="text/javascript">geo();</script>';
		$servername = "localhost";
		$username = "bill";
		$password = "passpass";
		$dbname = "GEOLOCALIZATION";

		$conn = mysqli_connect($servername, $username, $password, $dbname);
		if (!$conn) {
    			die("Connection failed: " . mysqli_connect_error());
		}
		$sql = "INSERT INTO GEOLOC (LATITUDE, LONGITUD, ACCURACY) VALUES (crd.latitude,cdr.longitude,crd.accuracy)";
		if($conn->query($sql) == TRUE){
			echo "New record created successfully";
		} else { echo "Error:" . $sql . "<br>" . $conn->error;}

		$sql = "SELECT longitude FROM GEOLOC";
		$result = mysqli_query($conn, $sql);
		if(mysqli_num_rows($result) > 0){
			while($row = mysqli_fetch_assoc($result))
			{
        			//echo "Longitude:" . $row["longitude"].;
    			}

		}
		else {
    			echo "0 results";
		}
		mysqli_close($conn);
	?>
      </body>
</html>
