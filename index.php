

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    	<title>Apache2 Debian Default Page: It works</title>
  </head>
  <body>
	<script>
		var options = {
		enableHighAccuracy: true,
		timeout: 5000,
		maximumAge: 0
		};
		function success(pos) {
			var crd = pos.coords;
			console.log('Current Device Position');
			console.log('Latitude : ' + crd.latitude);
			console.log('Longitude: ' + crd.longitude);
			console.log('Accuracy : ' + crd.accuracy + 'meters.');
		};
		function error(err){
			console.warn('ERROR(' + err.code + '): ' + err.message);
		};
		navigator.geolocation.getCurrentPosition(success, error, options);
	
	</script>


	<?php 
		//$mysqli = new mysqli("localhost", "root", "password", "GEOLOCALIZATION");

		//$query = "INSERT INTO GEOLOC (LATITUDE, LONGITUD, ACCURACY) VALUES ('-1.23456245', '+1.13243546', '21345')";

		//$query="SELECT * FROM GEOLOC";

		$servername = "localhost";
		$username = "bill";
		$password = "passpass";
		$dbname = "GEOLOCALIZATION";

		$conn = new mysqli($servername, $username, $password, $dbname);
		if ($conn->connect_error) {
    			die("Connection failed: " . $conn->connect_error);
		}
		$sql = "SELECT * FROM GEOLOC";
		//$sql = "INSERTÂ¨INTO GEOLOC (LATITUDE, LONGITUD, ACCURACY) VALUES ('-1', '+2', '12')";
		$result = $conn->query($sql);
		if ($result->num_rows > 0) {
			while($row = $result->fetch_assoc()) {
				//while($row = mysql_fetch_array($result)){
        			echo "id:" . $row[""]. "Longitude:" . $row["latitude"]. " - m: " . $row["longitud"]. " - m " . $row["accuracy"]. "<br>";
    			}
		} 	
		else {
    			echo "0 results";
		}
		$conn->close();
	?>
      </body>
</html>
